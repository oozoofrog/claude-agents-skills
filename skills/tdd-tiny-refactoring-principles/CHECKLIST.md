# 리팩토링 체크리스트

## 리팩토링 전 체크리스트

### 필수 조건
- [ ] 테스트가 존재하는가?
- [ ] 모든 테스트가 통과하는가?
- [ ] 리팩토링 범위가 명확한가?
- [ ] 기능 추가와 리팩토링을 분리했는가?

### 준비 사항
- [ ] 현재 코드의 동작을 이해했는가?
- [ ] 변경할 코드의 의존성을 파악했는가?
- [ ] 롤백 가능한 상태인가? (버전 관리/스냅샷)

---

## 리팩토링 중 체크리스트

### 각 변경 단계마다
- [ ] 한 번에 한 가지만 변경하고 있는가?
- [ ] 변경 후 테스트가 통과하는가?
- [ ] 외부 동작이 보존되었는가?

### 변경 유형별 확인

#### 이름 변경 시
- [ ] 새 이름이 의도를 명확히 드러내는가?
- [ ] 모든 참조가 업데이트되었는가?
- [ ] 자동 리팩토링 도구를 사용했는가?

#### 함수/메서드 추출 시
- [ ] 추출된 함수의 이름이 "무엇을 하는지" 설명하는가?
- [ ] 파라미터 수가 적절한가? (3개 이하 권장)
- [ ] 단일 책임을 가지는가?

#### 조건문 단순화 시
- [ ] 조건의 의도가 명확한가?
- [ ] 중첩 깊이가 줄었는가?
- [ ] Early return으로 변환할 수 있는가?

#### 중복 제거 시
- [ ] 제거하려는 것이 진짜 중복인가? (우연의 일치 아닌가?)
- [ ] 추상화 수준이 적절한가?
- [ ] 과도한 일반화가 아닌가?

---

## 리팩토링 후 체크리스트

### 필수 확인
- [ ] 모든 테스트가 통과하는가?
- [ ] 코드가 더 읽기 쉬워졌는가?
- [ ] 중복이 줄었는가?
- [ ] 복잡도가 감소했는가?

### 품질 확인
- [ ] 함수/메서드가 한 가지 일만 하는가?
- [ ] 클래스가 단일 책임을 가지는가?
- [ ] 이름이 의도를 드러내는가?
- [ ] 매직 넘버가 제거되었는가?

### 문서화
- [ ] 필요한 주석이 업데이트되었는가?
- [ ] 불필요한 주석이 제거되었는가?
- [ ] 변경 기록이 변경 의도를 설명하는가?

---

## 리팩토링 패턴 선택 가이드

### 문제 → 해결책

| 문제 | 적용할 리팩토링 |
|------|---------------|
| 긴 함수 | Extract Function |
| 긴 파라미터 목록 | Introduce Parameter Object |
| 중복 코드 | Extract Function, Pull Up Method |
| 복잡한 조건문 | Decompose Conditional, Replace Conditional with Polymorphism |
| 데이터 뭉치 | Extract Class, Introduce Parameter Object |
| 기능 편애 | Move Function |
| Switch 문 | Replace Conditional with Polymorphism |
| 평행 상속 계층 | Move Function, Move Field |
| 게으른 클래스 | Inline Class |
| 추측성 일반화 | Collapse Hierarchy, Inline Function |
| 임시 필드 | Extract Class, Introduce Special Case |
| 메시지 체인 | Hide Delegate |
| 중개자 | Remove Middle Man |
| 부적절한 친밀 | Move Function, Hide Delegate |
| 거대한 클래스 | Extract Class, Extract Subclass |
| 주석 | Extract Function, Rename |

---

## 단계별 리팩토링 템플릿

### 1. 현재 상태 기록
```
대상 코드: [파일/함수명]
현재 문제: [구체적인 문제점]
테스트 상태: [통과/실패/없음]
```

### 2. 목표 설정
```
리팩토링 목표: [개선하려는 점]
적용할 패턴: [리팩토링 기법]
예상 변경 범위: [파일/함수 목록]
```

### 3. 단계 계획
```
Step 1: [첫 번째 작은 변경]
Step 2: [두 번째 작은 변경]
...
```

### 4. 각 단계 실행
```
[ ] 변경 수행
[ ] 테스트 실행
[ ] 통과 확인
[ ] (선택) 커밋
```

### 5. 완료 검토
```
[ ] 모든 테스트 통과
[ ] 코드 품질 개선 확인
[ ] 문서 업데이트
```
